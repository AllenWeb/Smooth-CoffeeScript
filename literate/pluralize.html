<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
/*<![CDATA[*/
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode, table.sourceCode pre 
   { margin: 0; padding: 0; border: 0; vertical-align: baseline; border: none; }
td.lineNumbers { border-right: 1px solid #AAAAAA; text-align: right; color: #AAAAAA; padding-right: 5px; padding-left: 5px; }
td.sourceCode { padding-left: 5px; }
code.sourceCode span.kw { color: #007020; font-weight: bold; } 
code.sourceCode span.dt { color: #902000; }
code.sourceCode span.dv { color: #40a070; }
code.sourceCode span.bn { color: #40a070; }
code.sourceCode span.fl { color: #40a070; }
code.sourceCode span.ch { color: #4070a0; }
code.sourceCode span.st { color: #4070a0; }
code.sourceCode span.co { color: #60a0b0; font-style: italic; }
code.sourceCode span.ot { color: #007020; }
code.sourceCode span.al { color: red; font-weight: bold; }
code.sourceCode span.fu { color: #06287e; }
code.sourceCode span.re { }
code.sourceCode span.er { color: red; font-weight: bold; }
/*]]>*/
  </style>
  <link rel="stylesheet" href="pandoc-template.css" />
</head>
<body>
<div class="rdbWrapper" data-show-read="1" data-show-send-to-kindle="1" data-show-print="1" data-show-email="1" data-orientation="0" data-version="1" data-bg-color="#fffce6"></div><script type="text/javascript">(function() {var s = document.getElementsByTagName("script")[0],rdb = document.createElement("script"); rdb.type = "text/javascript"; rdb.async = true; rdb.src = document.location.protocol + "//www.readability.com/embed.js"; s.parentNode.insertBefore(rdb, s); })();</script>
<input class="field" type="button" value="Adjust Width" onclick="(function () {
        return document.getElementById('page').style.maxWidth = document.getElementById('page').style.maxWidth === '' ? '600px' : '';
      }).call(this);" />
<script src="node_modules/coffee-script.js"></script>
<script src="node_modules/coffeekup.js"></script>
<script>var __slice = Array.prototype.slice;var __hasProp = Object.prototype.hasOwnProperty;var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };var __extends = function(child, parent) {  for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; }  function ctor() { this.constructor = child; }  ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype;  return child; };var __indexOf = Array.prototype.indexOf || function(item) {  for (var i = 0, l = this.length; i < l; i++) {    if (this[i] === item) return i;  } return -1; };(function () {
      window.ostrich = 'data:image/png;base64,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';
      return window.onload = function() {
        var canvas, evaluateSource, segment, _i, _len, _ref;
        canvas = document.getElementById('drawCanvas');
        if (canvas != null) window.ctx = canvas.getContext('2d');
        evaluateSource = function() {
          var code, codeSegment, codeTag, jsprogram, program, segment, _i, _len, _ref;
          program = '';
          if (window.ctx != null) {
            window.ctx.clearRect(0, 0, window.ctx.canvas.width, window.ctx.canvas.height);
          }
          document.getElementsByClassName('output')[0].getElementsByTagName('code')[0].innerHTML = '';
          _ref = document.getElementsByTagName('pre');
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            codeSegment = _ref[_i];
            if (codeSegment.className === 'sourceCode') {
              codeTag = codeSegment.getElementsByTagName('code')[0];
              if (codeTag.className === 'sourceCode coffeescript') {
                segment = codeTag.innerHTML;
                code = segment.replace(/<br>/g, '\n');
                code = code.replace(/<[^>]*>/g, '');
                code = code.replace(/[&]gt;/g, '>');
                code = code.replace(/[&]lt;/g, '<');
                program += code + '\n';
              }
            }
          }
          jsprogram = '';
          try {
            jsprogram = CoffeeScript.compile(program, {
              bare: true
            });
            document.getElementsByClassName('js-source')[0].getElementsByTagName('code')[0].innerHTML = jsprogram;
          } catch (error) {
            document.getElementsByClassName('js-source')[0].getElementsByTagName('code')[0].innerHTML = error;
            return;
          }
          jsprogram = 'var show = function(msg) {\nwindow.document.getElementsByClassName(\'output\')[0]\n  .getElementsByTagName(\'code\')[0].innerHTML += msg + \'\\n\'; };\nvar showDocument = function(content, width, height) {\nif (width == null) width = 300; if (height == null) height = 300;\nshow(\'<iframe width=\"\' + width + \'\" height=\"\' + height + \'\"\' +\n\'src=\"data:text/html;charset=utf-8,\' +\nencodeURIComponent(content) + \'\"\' + \' />\'); };' + jsprogram + '; if (typeof draw !== "undefined") draw(window.ctx);';
          try {
            return eval(jsprogram);
          } catch (error) {
            return document.getElementsByClassName('output')[0].getElementsByTagName('code')[0].innerHTML = error;
          }
        };
        _ref = document.getElementsByTagName('pre');
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          segment = _ref[_i];
          segment.getElementsByTagName('code')[0].addEventListener('keyup', evaluateSource, false);
        }
        return evaluateSource();
      };
    }).call(this);</script>
<div id="page">
<h1 id="pluralize----smooth-coffeescript">Pluralize — <em><a href="http://autotelicum.github.com/Smooth-CoffeeScript/">Smooth CoffeeScript</a></em></h1>
<blockquote>
<p>This literate program is <em>interactive</em> in its HTML form. Edit a CoffeeScript segment to try it.</p>
</blockquote>
<p><strong>How do you add ’s’ to a word when there is more than one of something?</strong></p>
<p>It is often seen in JavaScript with the ternary operator <code>?:</code> but that is hard-coding at the expense of future maintenance and internationalization.</p>
<p>First some preliminaries. Let’s <code>show</code> the results whether we are running in a server or a web client. Something like <code>show = if exports? then console.log else alert</code>. And wrap the different methods in a <code>test</code> function so we can see if they work.</p>
<pre class="sourceCode"><code class="sourceCode coffeescript" contenteditable="true">test <span class="kw">=</span> <span class="fu">(points) -&gt;</span></code></pre>
<h2 id="readable-ways">Readable ways</h2>
<p>The simplest readable way</p>
<pre class="sourceCode"><code class="sourceCode coffeescript" contenteditable="true">  show <span class="st">&quot;0: You got </span><span class="ch">#{</span>points<span class="ch">}</span><span class="st"> point</span><span class="ch">#{</span>if points &gt; 1 then 's' else ''<span class="ch">}</span><span class="st">&quot;</span></code></pre>
<p>Encapsulate in a function, future i18n will be easier</p>
<pre class="sourceCode"><code class="sourceCode coffeescript" contenteditable="true">  pluralIf <span class="kw">=</span> <span class="fu">(stem, cond) -&gt;</span> stem <span class="kw">+</span> <span class="kw">(</span><span class="kw">if</span> cond <span class="kw">then</span> <span class="st">'s'</span> <span class="kw">else</span> <span class="st">''</span><span class="kw">)</span><br />  show <span class="st">&quot;1: You got </span><span class="ch">#{</span>points<span class="ch">}</span><span class="st"> </span><span class="ch">#{</span>pluralIf 'point', points &gt; 1<span class="ch">}</span><span class="st">&quot;</span></code></pre>
<p>Encapsulate in a function, handle negative numbers</p>
<pre class="sourceCode"><code class="sourceCode coffeescript" contenteditable="true">  pluralUnless <span class="kw">=</span> <span class="fu">(stem, cond) -&gt;</span> stem <span class="kw">+</span> <span class="kw">(</span><span class="kw">unless</span> cond <span class="kw">then</span> <span class="st">'s'</span> <span class="kw">else</span> <span class="st">''</span><span class="kw">)</span><br />  show <span class="st">&quot;2: You got </span><span class="ch">#{</span>points<span class="ch">}</span><span class="st"> </span><span class="ch">#{</span>pluralUnless 'point', -2 &lt; points &lt; 2<span class="ch">}</span><span class="st">&quot;</span></code></pre>
<p>Encapsulate in a String method, could collide with another definition</p>
<pre class="sourceCode"><code class="sourceCode coffeescript" contenteditable="true">  <span class="ot">String</span><span class="kw">::</span>pluralIf <span class="kw">?=</span> <span class="fu">(cond) -&gt;</span> <span class="dt">this</span> <span class="kw">+</span> <span class="kw">(</span><span class="kw">if</span> cond <span class="kw">then</span> <span class="st">'s'</span> <span class="kw">else</span> <span class="st">''</span><span class="kw">)</span><br />  show <span class="st">&quot;3: You got </span><span class="ch">#{</span>points<span class="ch">}</span><span class="st"> </span><span class="ch">#{</span>'point'.pluralIf points &gt; 1<span class="ch">}</span><span class="st">&quot;</span></code></pre>
<h2 id="tricks">Tricks</h2>
<p>Use the existential operator to catch the singular undefined</p>
<pre class="sourceCode"><code class="sourceCode coffeescript" contenteditable="true">  show <span class="st">&quot;4: You got </span><span class="ch">#{</span>points<span class="ch">}</span><span class="st"> point</span><span class="ch">#{</span>('s' if points &gt; 1) ? ''<span class="ch">}</span><span class="st">&quot;</span></code></pre>
<p>Convert the condition to a number and do an array lookup</p>
<pre class="sourceCode"><code class="sourceCode coffeescript" contenteditable="true">  show <span class="st">&quot;5: You got </span><span class="ch">#{</span>points<span class="ch">}</span><span class="st"> point</span><span class="ch">#{</span>['','s'][+(points &gt; 1)]<span class="ch">}</span><span class="st">&quot;</span></code></pre>
<p>Use the inverted condition to ask for a letter.</p>
<p><code>true =&gt; charAt 1 =&gt; ''</code> — <code>false =&gt; charAt 0 =&gt; 's'</code></p>
<pre class="sourceCode"><code class="sourceCode coffeescript" contenteditable="true">  show <span class="st">&quot;6: You got </span><span class="ch">#{</span>points<span class="ch">}</span><span class="st"> point</span><span class="ch">#{</span>'s'.charAt points &lt;= 1<span class="ch">}</span><span class="st">&quot;</span></code></pre>
<p>Create an array whose length is determined by the condition. It consists of empty elements so join it with ’s’</p>
<pre class="sourceCode"><code class="sourceCode coffeescript" contenteditable="true">  show <span class="st">&quot;7: You got </span><span class="ch">#{</span>points<span class="ch">}</span><span class="st"> point</span><span class="ch">#{</span>Array(1+(points&gt;1)).join 's'<span class="ch">}</span><span class="st">&quot;</span></code></pre>
<p>Concatenate to an empty array, undefined does nothing</p>
<pre class="sourceCode"><code class="sourceCode coffeescript" contenteditable="true">  show <span class="st">&quot;8: You got </span><span class="ch">#{</span>points<span class="ch">}</span><span class="st"> point</span><span class="ch">#{</span>[].concat ('s' if points &gt; 1)<span class="ch">}</span><span class="st">&quot;</span></code></pre>
<h2 id="contributed">Contributed</h2>
<p>Create an array with either ’s’ or undefined — from <a href="https://gist.github.com/satyr">satyr</a></p>
<pre class="sourceCode"><code class="sourceCode coffeescript" contenteditable="true">  show <span class="st">&quot;9: You got </span><span class="ch">#{</span>points<span class="ch">}</span><span class="st"> point</span><span class="ch">#{</span>['s' if points &gt; 1]<span class="ch">}</span><span class="st">&quot;</span></code></pre>
<h2 id="test">Test</h2>
<p>Run a test for a small range of numbers</p>
<pre class="sourceCode"><code class="sourceCode coffeescript" contenteditable="true">test n <span class="kw">for</span> n <span class="kw">in</span> <span class="kw">[-</span><span class="dv">3</span><span class="kw">..</span><span class="dv">3</span><span class="kw">]</span></code></pre>
<hr />
<h2 id="output">Output</h2>
<pre class="output"><code></code></pre>
<p></p>
<h2 id="javascript">JavaScript</h2>
<pre class="js-source"><code></code></pre>
<p></p>
<hr />
<p>Formats <a href="http://autotelicum.github.com/Smooth-CoffeeScript/literate/pluralize.coffee">CoffeeScript</a> <a href="http://autotelicum.github.com/Smooth-CoffeeScript/literate/pluralize.md">Markdown</a> <a href="http://autotelicum.github.com/Smooth-CoffeeScript/literate/pluralize.pdf">PDF</a> <a href="http://autotelicum.github.com/Smooth-CoffeeScript/literate/pluralize.html">HTML</a></p>
<p>License <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution Share Alike</a> by autotelicum © 2554/2011</p>
<!---------------------------------------------------------------------------
Commands used to extract code, execute it, and to format this document:

Edit ,x/^~~+[   ]*{\.coffeescript.*}$/+,/^~~+$/-p
Edit ,>ssam -n 'x/^~~+[   ]*{\.coffeescript.*}$/+,/^~~+$/-' |cat embed-standalone.coffee - |tee pluralize.coffee | coffee -cs >pluralize.js; coffee pluralize.coffee >pluralize.output; plumb pluralize.output
Edit ,>pandoc -f markdown -t html -S -5 --css pandoc-template.css --template pandoc-template.html -B embed-readability.html -B embed.html | ssam 's/(<code class="sourceCode coffeescript" contenteditable="true")/\1 contenteditable=\"true\"/g' >pluralize.html; open pluralize.html; plumb pluralize.html
Edit ,>markdown2pdf --listings --xetex '--template=pandoc-template.tex' -o pluralize.pdf; open pluralize.pdf

To execute these commands; middle-button select them in the acme environment.
acme and ssam are part of the plan9 OS and can run on *nix variants via plan9port.
The formatting is done with pandoc, a universal markup converter, and TeX.
---------------------------------------------------------------------------->

</body>
</html>